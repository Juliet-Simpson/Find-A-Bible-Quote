{% extends "base.html" %}
{% block content %}
<h3 class="center">My Quotes</h3>

<!-- NEW IDEA -->
{% if my_quotes|length > 0 %}

<ul class="collapsible">
    {% for quote in my_quotes %}
    <li>
        <div class="collapsible-header">
            <div class="card-panel collapsible-card">
                <!-- Row hidden on small screens to render different format -->
                <div class="row big-info">
                    <div class="col s4">
                        <h6 class="justify-left">{{ quote.book }} {{ quote.chapter }} :
                            {{ quote.start_verse }}{% if quote.end_verse%}-{{quote.end_verse}}{% endif %}</h6>
                    </div>
                    <div class="col s4">
                        <h6 class="theme">Theme: <strong>{{ quote.theme }}.</strong></h6>
                    </div>
                    <div class="col s4 btn-col">
                        <a href="{{ url_for('edit_quote', quote_id=quote._id) }}" class="btn-small"><i
                                class="fas fa-pencil-alt"></i></a>
                        <a href="#modal{{quote._id}}" class="btn-small modal-trigger"><i
                                class="far fa-trash-alt"></i></a>
                    </div>
                </div>
                <!-- Repeated row code with changed format only displaying on small screens -->
                <div class="row small-info">
                    <div class="col s6">
                        <h6 class="justify-left">{{ quote.book }} {{ quote.chapter }} :
                            {{ quote.start_verse }}{% if quote.end_verse%}-{{quote.end_verse}}{% endif %}</h6>
                    </div>
                    <div class="col s6 btn-col">
                        <a href="{{ url_for('edit_quote', quote_id=quote._id) }}" class="btn-small"><i
                                class="fas fa-pencil-alt"></i></a>
                        <a href="#modal{{quote._id}}" class="btn-small modal-trigger"><i
                                class="far fa-trash-alt"></i></a>
                    </div>
                    <div class="row">
                    <div class="col s12">
                        <h6 class="theme">Theme: <strong>{{ quote.theme }}.</strong></h6>
                    </div>
                </div>
                </div>
                <!-- End repeated code -->
                <!-- Quote text -->
                <div class="row">
                    <div class="col s12">
                        <h5>"{{quote.text}}"</h5>
                    </div>
                </div>
                <!-- End Quote -->
                <div class="row">
                    <div class="col s12 btn-col">
                        <i class="fas fa-caret-down"></i>Comments
                    </div>
                </div>
            </div>
        </div>
        <!-- Comments section -->
        <div class="collapsible-body comment-body">
            <ul>
                {% if quote_comments|length > 0 %}
                {% for comment in quote_comments %}
                <li>
                    <div class="card-panel">
                        <div>
                            {{ comment.comment }}
                        </div>
                        <div class="btn-col">
                            <strong>By: </strong>{{ comment.comment_by }}
                        </div>
                    </div>
                </li>
                {% endfor %}
                {% else %}
                <li>
                    <h6>There are no comments about this quote yet. </h6>
                </li>
                {% endif %}
                <li>
                    <div class="card-panel make-comment-card">
                        <div class="row">
                            <form method="POST" action="{{ url_for('comment', quote_id=quote._id) }}">
                                <div class="input-field">
                                    <input name="comment" id="comment" minlength="3" type="text">
                                    <label for="comment"><i class="fas fa-search search-label"></i> Make a
                                        comment</label>
                                </div>
                            </form>
                        </div>
                    </div>
                </li>
            </ul>
        </div>{% extends "base.html" %}
        {% block content %}
        <h3 class="center">My Quotes</h3>
        
        <!-- NEW IDEA -->
        {% if my_quotes|length > 0 %}
        
        <ul class="collapsible">
            {% for quote in my_quotes %}
            <li>
                <div class="collapsible-header">
                    <div class="card-panel collapsible-card">
                        <!-- Row hidden on small screens to render different format -->
                        <div class="row big-info">
                            <div class="col s4">
                                <h6 class="justify-left">{{ quote.book }} {{ quote.chapter }} :
                                    {{ quote.start_verse }}{% if quote.end_verse%}-{{quote.end_verse}}{% endif %}</h6>
                            </div>
                            <div class="col s4">
                                <h6 class="theme">Theme: <strong>{{ quote.theme }}.</strong></h6>
                            </div>
                            <div class="col s4 btn-col">
                                <a href="{{ url_for('edit_quote', quote_id=quote._id) }}" class="btn-small"><i
                                        class="fas fa-pencil-alt"></i></a>
                                <a href="#modal{{quote._id}}" class="btn-small modal-trigger"><i
                                        class="far fa-trash-alt"></i></a>
                            </div>
                        </div>
                        <!-- Repeated row code with changed format only displaying on small screens -->
                        <div class="row small-info">
                            <div class="col s6">
                                <h6 class="justify-left">{{ quote.book }} {{ quote.chapter }} :
                                    {{ quote.start_verse }}{% if quote.end_verse%}-{{quote.end_verse}}{% endif %}</h6>
                            </div>
                            <div class="col s6 btn-col">
                                <a href="{{ url_for('edit_quote', quote_id=quote._id) }}" class="btn-small"><i
                                        class="fas fa-pencil-alt"></i></a>
                                <a href="#modal{{quote._id}}" class="btn-small modal-trigger"><i
                                        class="far fa-trash-alt"></i></a>
                            </div>
                            <div class="row">
                            <div class="col s12">
                                <h6 class="theme">Theme: <strong>{{ quote.theme }}.</strong></h6>
                            </div>
                        </div>
                        </div>
                        <!-- End repeated code -->
                        <!-- Quote text -->
                        <div class="row">
                            <div class="col s12">
                                <h5>"{{quote.text}}"</h5>
                            </div>
                        </div>
                        <!-- End Quote -->
                        <div class="row">
                            <div class="col s12 btn-col">
                                <i class="fas fa-caret-down"></i>Comments
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Comments section -->
                <div class="collapsible-body comment-body">
                    <ul>
                        {% if all_comments|length > 0 %}
                        {% for comment in all_comments %}
                        <li>
                            <div class="card-panel">
                                <div>
                                    {{ comment.comment }}
                                </div>
                                <div class="btn-col">
                                    <strong>By: </strong>{{ comment.comment_by }}
                                </div>
                            </div>
                        </li>
                        {% endfor %}
                        {% else %}
                        <li>
                            <h6>There are no comments about this quote yet. </h6>
                        </li>
                        {% endif %}
                        <li>
                            <div class="card-panel make-comment-card">
                                <div class="row">
                                    <form method="POST" action="{{ url_for('comment', quote_id=quote._id) }}">
                                        <div class="input-field">
                                            <input name="comment" id="comment" minlength="3" type="text">
                                            <label for="comment"><i class="fas fa-search search-label"></i> Make a
                                                comment</label>
                                        </div>
                                    </form>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
                <!--Confirm delete modal-->
                <div id="modal{{quote._id}}" class="modal">
                    <div class="modal-content">
                        <h3>Confirm Delete</h3>
                        <h5>Are you sure that you want to delete this quote?</h5>
                        <p>(Comments will also be deleted).</p>
                    </div>
                    <div class="modal-footer">
                        <a href="#!" class="modal-close btn blue text-shadow">
                            Cancel<i class="far fa-times-circle right"></i></a>
                        <a href="{{ url_for('delete_quote', quote_id=quote._id, delete_theme=quote.theme) }}"
                            class="modal-close btn red text-shadow">
                            Delete<i class="fas fa-times-circle right"></i></a>
                    </div>
                </div>
                <!-- End modal -->
            </li>
            {% endfor %}
        </ul>
        {% else %}
        <h4 class="red-text text-darken-4 center-align">You have not added any quotes yet. Click <a
                href="{{ url_for('add_quote') }}"> here </a>to add a quote.</h4>
        {% endif %}
        
        {% endblock %}
        <!--Confirm delete modal-->
        <div id="modal{{quote._id}}" class="modal">
            <div class="modal-content">
                <h3>Confirm Delete</h3>
                <h5>Are you sure that you want to delete this quote?</h5>
                <p>(Comments will also be deleted).</p>
            </div>
            <div class="modal-footer">
                <a href="#!" class="modal-close btn blue text-shadow">
                    Cancel<i class="far fa-times-circle right"></i></a>
                <a href="{{ url_for('delete_quote', quote_id=quote._id, delete_theme=quote.theme) }}"
                    class="modal-close btn red text-shadow">
                    Delete<i class="fas fa-times-circle right"></i></a>
            </div>
        </div>
        <!-- End modal -->
    </li>
    {% endfor %}
</ul>
{% else %}
<h4 class="red-text text-darken-4 center-align">You have not added any quotes yet. Click <a
        href="{{ url_for('add_quote') }}"> here </a>to add a quote.</h4>
{% endif %}

{% endblock %}